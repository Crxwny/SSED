<!doctype html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <title>Alle HTML5 Input-Typen Formular</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/parsleyjs@2.9.2/dist/parsley.min.js"></script>
    <style>
        .hidden { display: none; }
        .form-section {
            background-color: #f8f9fa;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .form-section h4 {
            color: #495057;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 10px;
        }
        .required::after {
            content: " *";
            color: red;
        }
        .volume-display {
            font-weight: bold;
            color: #0d6efd;
        }
    </style>
</head>
<body class="p-4 bg-light">

<div class="container">
    <h1 class="text-center mb-4">HTML5 Input-Typen Demo</h1>

    <div class="bs-callout bs-callout-warning hidden alert alert-danger">
        <h4>Ups!</h4>
        <p>Das Formular enthält Fehler. Bitte überprüfen Sie Ihre Eingaben.</p>
    </div>

    <div class="bs-callout bs-callout-info hidden alert alert-success">
        <h4>Erfolg!</h4>
        <p>Alle Eingaben sind korrekt :)</p>
    </div>

    <form id="demo-form" data-parsley-validate class="bg-white p-4 rounded shadow-sm">

        <div class="form-section">
            <h4>Text-basierte Eingaben</h4>

            <!-- text -->
            <div class="mb-3">
                <label for="fullname" class="form-label required">Vollständiger Name</label>
                <input type="text" id="fullname" class="form-control" name="fullname"
                       required data-parsley-minlength="2" data-parsley-maxlength="50">
                <div class="form-text">Mindestens 2 Zeichen, maximal 50 Zeichen</div>
            </div>

            <!-- password -->
            <div class="mb-3">
                <label for="password" class="form-label required">Passwort</label>
                <input type="password" id="password" class="form-control" name="password"
                       required data-parsley-minlength="6" data-parsley-pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$">
                <div class="form-text">Mindestens 6 Zeichen, Groß- und Kleinbuchstaben sowie eine Zahl</div>
            </div>

            <!-- email -->
            <div class="mb-3">
                <label for="email" class="form-label required">E-Mail</label>
                <input type="email" id="email" class="form-control" name="email" required>
            </div>

            <!-- url -->
            <div class="mb-3">
                <label for="website" class="form-label">Webseite</label>
                <input type="url" id="website" class="form-control" name="website"
                       data-parsley-type="url">
            </div>

            <!-- tel -->
            <div class="mb-3">
                <label for="phone" class="form-label">Telefon</label>
                <input type="tel" id="phone" class="form-control" name="phone"
                       data-parsley-pattern="^[\+]?[0-9\s\-\(\)]{6,}$">
                <div class="form-text">Gültige Telefonnummer mit mindestens 6 Ziffern</div>
            </div>

            <!-- search -->
            <div class="mb-3">
                <label for="search" class="form-label">Suche</label>
                <input type="search" id="search" class="form-control" name="search">
            </div>
        </div>

        <div class="form-section">
            <h4>Numerische Eingaben</h4>

            <!-- number -->
            <div class="mb-3">
                <label for="quantity" class="form-label required">Menge (1-10)</label>
                <input type="number" id="quantity" class="form-control" name="quantity"
                       min="1" max="10" required>
            </div>

            <!-- range -->
            <div class="mb-3">
                <label for="volume" class="form-label">Lautstärke (0-100): <span id="volume-value" class="volume-display">50</span></label>
                <input type="range" id="volume" class="form-range" name="volume"
                       min="0" max="100" value="50">
            </div>
        </div>

        <div class="form-section">
            <h4>Datum und Zeit</h4>

            <!-- date -->
            <div class="mb-3">
                <label for="birthday" class="form-label">Geburtstag</label>
                <input type="date" id="birthday" class="form-control" name="birthday"
                       data-parsley-max="<?php echo date('Y-m-d'); ?>">
                <div class="form-text">Darf nicht in der Zukunft liegen</div>
            </div>

            <!-- datetime-local -->
            <div class="mb-3">
                <label for="appointment" class="form-label">Termin</label>
                <input type="datetime-local" id="appointment" class="form-control" name="appointment"
                       data-parsley-min="<?php echo date('Y-m-d\TH:i'); ?>">
                <div class="form-text">Muss in der Zukunft liegen</div>
            </div>

            <!-- month -->
            <div class="mb-3">
                <label for="month" class="form-label">Monat (YYYY-MM)</label>
                <input type="month" id="month" name="month" class="form-control"
                       data-parsley-pattern="^\d{4}-(0[1-9]|1[0-2])$"
                       data-parsley-pattern-message="Bitte geben Sie einen gültigen Monat ein (YYYY-MM)">
            </div>

            <!-- week -->
            <div class="mb-3">
                <label for="week" class="form-label">Woche (YYYY-Www)</label>
                <input type="week" id="week" name="week" class="form-control"
                       data-parsley-pattern="^\d{4}-W(0[1-9]|[1-4][0-9]|5[0-3])$"
                       data-parsley-pattern-message="Bitte geben Sie eine gültige Woche ein (YYYY-Www)">
            </div>

            <!-- time -->
            <div class="mb-3">
                <label for="alarm" class="form-label">Weckzeit</label>
                <input type="time" id="alarm" class="form-control" name="alarm">
            </div>
        </div>

        <div class="form-section">
            <h4>Auswahl und Dateien</h4>

            <!-- color -->
            <div class="mb-3">
                <label for="favcolor" class="form-label">Lieblingsfarbe</label>
                <input type="color" id="favcolor" class="form-control form-control-color" name="favcolor" value="#563d7c">
            </div>

            <!-- file -->
            <div class="mb-3">
                <label for="fileUpload" class="form-label">Datei hochladen (nur Bilder)</label>
                <input type="file" id="fileUpload" class="form-control" name="fileUpload"
                       accept="image/*" data-parsley-filemaxmegabytes="2"
                       data-parsley-accept="image">
                <div class="form-text">Maximal 2 MB, nur Bilddateien</div>
            </div>

            <!-- radio -->
            <div class="mb-3">
                <label class="form-label required">Geschlecht</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="male" name="gender" value="male" required>
                    <label class="form-check-label" for="male">Männlich</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="female" name="gender" value="female">
                    <label class="form-check-label" for="female">Weiblich</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="other" name="gender" value="other">
                    <label class="form-check-label" for="other">Andere</label>
                </div>
            </div>

            <!-- checkbox -->
            <div class="mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="agree" name="agree" required>
                    <label class="form-check-label required" for="agree">Ich stimme den AGB zu</label>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h4>Buttons und spezielle Elemente</h4>

            <!-- button -->
            <div class="mb-3">
                <button type="button" class="btn btn-secondary" id="myButton">Klick mich</button>
                <div class="form-text">Dieser Button hat keine Standard-Funktionalität</div>
            </div>

            <!-- image -->
            <div class="mb-3">
                <label class="form-label">Bild-Button</label><br>
                <input type="image" src="https://placehold.co/600x400"
                       alt="Absenden" width="80" height="40">
                <div class="form-text">Funktioniert wie ein Submit-Button</div>
            </div>

            <!-- reset -->
            <div class="mb-3">
                <input type="reset" class="btn btn-warning" value="Formular zurücksetzen">
                <div class="form-text">Setzt alle Felder auf ihre Standardwerte zurück</div>
            </div>

            <!-- hidden -->
            <input type="hidden" id="token" name="token" value="secureToken123">
        </div>

        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
            <input type="submit" class="btn btn-primary" value="Absenden">
        </div>
    </form>
</div>

<script>
    $(function () {
        // Parsley.js Konfiguration
        $('#demo-form').parsley().on('field:validated', function() {
            const ok = $('.parsley-error').length === 0;
            $('.bs-callout-info').toggleClass('hidden', !ok);
            $('.bs-callout-warning').toggleClass('hidden', ok);
        }).on('form:submit', function() {
            // Hier würde normalerweise die Formularverarbeitung stattfinden
            alert('Formular erfolgreich validiert! In einer echten Anwendung würde es jetzt abgeschickt werden.');
            return false; // Verhindert echte Absendung für diese Demo
        });

        // Range-Slider Wert anzeigen
        $('#volume').on('input', function() {
            $('#volume-value').text(this.value);
        });

        // Custom Validator für Dateiupload-Größe
        window.Parsley.addValidator('filemaxmegabytes', {
            validateString: function(_value, maxMegabytes, parsleyInstance) {
                if (!window.FormData) {
                    return true; // Fallback für ältere Browser
                }
                var files = parsleyInstance.$element[0].files;
                if (files.length == 0) {
                    return true; // Keine Datei ausgewählt
                }
                return files[0].size <= maxMegabytes * 1024 * 1024;
            },
            requirementType: 'integer',
            messages: {
                de: 'Die Datei darf maximal %s MB groß sein.'
            }
        });

        // Custom Validator für Dateityp
        window.Parsley.addValidator('accept', {
            validateString: function(_value, acceptType, parsleyInstance) {
                if (!window.FormData) {
                    return true; // Fallback für ältere Browser
                }
                var files = parsleyInstance.$element[0].files;
                if (files.length == 0) {
                    return true; // Keine Datei ausgewählt
                }

                var file = files[0];
                if (acceptType === 'image') {
                    return file.type.startsWith('image/');
                }

                return true;
            },
            messages: {
                de: 'Bitte wählen Sie eine Bilddatei aus.'
            }
        });

        // Button mit Beispiel-Funktionalität
        $('#myButton').on('click', function() {
            alert('Button wurde geklickt! Diese Funktion könnte beliebigen JavaScript-Code ausführen.');
        });
    });
</script>

</body>
</html>